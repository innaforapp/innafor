(function framework7ComponentLoader(a,e){void 0===e&&(e=!0);document,window;var r=a.$,t=(a.Template7,a.utils),n=(a.device,a.support),o=(a.Class,a.Modal,a.ConstructorMethods,a.ModalMethods,{open:function(a,e){var t;void 0===a&&(a=".card-expandable"),void 0===e&&(e=!0);var o=this;if(!r(".card-opened").length){var s=r(a).eq(0);if(s&&s.length&&!(s.hasClass("card-opened")||s.hasClass("card-opening")||s.hasClass("card-closing"))){var d,c=s.parents(".page").eq(0);if(c.length)if(s.trigger("card:beforeopen",{prevent:A}),o.emit("cardBeforeOpen",s[0],A),!d){var i,l,p;o.params.card.backrop&&((i=s.parents(".page-content").find(".card-backdrop")).length||(i=r('<div class="card-backdrop"></div>'),s.parents(".page-content").append(i))),o.params.card.hideNavbarOnOpen&&((l=c.children(".navbar")).length||c[0].f7Page&&(l=c[0].f7Page.$navbarEl)),o.params.card.hideToolbarOnOpen&&((p=c.children(".toolbar")).length||(p=c.parents(".view").children(".toolbar")),p.length||(p=c.parents(".views").children(".toolbar")));var h,f=s.css("transform");f&&f.match(/[2-9]/)&&(h=!0);var g=s.children(".card-content"),v=r(document.createElement("div")).addClass("card-expandable-size");s.append(v);var b,m,u=s[0].offsetWidth,C=s[0].offsetHeight,x=c[0].offsetWidth,w=c[0].offsetHeight,k=v[0].offsetWidth||x,O=v[0].offsetHeight||w,T=k/u,E=O/C,M=s.offset();h?(b=s[0].offsetLeft,m=s[0].offsetTop-s.parents(".page-content")[0].scrollTop):(b=M.left,m=M.top-c.offset().top,o.rtl&&(b-=s[0].scrollLeft)),m-=(w-O)/2;var H=k-u-(b-=(x-k)/2);o.rtl&&(b=(t=[H,b])[0],H=t[1]);var $,B,W,q,N,P,y,z,L,X,Y,D=O-C-m,I=(H-b)/2,j=(D-m)/2;o.params.card.hideNavbarOnOpen&&l&&l.length&&o.navbar.hide(l,e),o.params.card.hideToolbarOnOpen&&p&&p.length&&o.toolbar.hide(p,e),i&&i.removeClass("card-backdrop-out").addClass("card-backdrop-in"),s.removeClass("card-transitioning"),e&&s.addClass("card-opening"),s.trigger("card:open"),o.emit("cardOpen",s[0]),g.css({width:k+"px",height:O+"px"}).transform("translate3d("+(o.rtl?b+I:-b-I)+"px, 0px, 0) scale("+1/T+", "+1/E+")"),s.transform("translate3d("+I+"px, "+j+"px, 0) scale("+T+", "+E+")"),e?s.transitionEnd(function(){F()}):F(),c.addClass("page-with-card-opened"),s[0].detachEventHandlers=function(){o.off("resize",G),n.touch&&o.params.card.swipeToClose&&(o.off("touchstart:passive",J),o.off("touchmove:active",K),o.off("touchend:passive",Q))},o.on("resize",G),n.touch&&o.params.card.swipeToClose&&(o.on("touchstart:passive",J),o.on("touchmove:active",K),o.on("touchend:passive",Q))}}}function A(){d=!0}function F(){s.addClass("card-opened"),s.removeClass("card-opening"),s.trigger("card:opened"),o.emit("cardOpened",s[0])}function G(){var a;s.removeClass("card-transitioning"),u=s[0].offsetWidth,C=s[0].offsetHeight,x=c[0].offsetWidth,w=c[0].offsetHeight,k=v[0].offsetWidth||x,O=v[0].offsetHeight||w,T=k/u,E=O/C,s.transform("translate3d(0px, 0px, 0) scale(1)"),M=s.offset(),b=M.left-(x-k)/2,o.rtl&&(b-=s[0].scrollLeft),m=M.top-(w-O)/2,H=k-u-b,D=O-C-m,o.rtl&&(b=(a=[H,b])[0],H=a[1]),I=(H-b)/2,j=(D-m)/2,s.transform("translate3d("+I+"px, "+j+"px, 0) scale("+T+", "+E+")"),g.css({width:k+"px",height:O+"px"}).transform("translate3d("+(o.rtl?b+I:-b-I)+"px, 0px, 0) scale("+1/T+", "+1/E+")")}function J(a){r(a.target).closest(s).length&&s.hasClass("card-opened")&&($=g.scrollTop(),B=!0,q=a.targetTouches[0].pageX,N=a.targetTouches[0].pageY,z=void 0,X=!1,Y=!1)}function K(a){if(B){if(P=a.targetTouches[0].pageX,y=a.targetTouches[0].pageY,void 0===z&&(z=!!(z||Math.abs(y-N)>Math.abs(P-q))),Y||X||(!z&&a.targetTouches[0].clientX<=50?Y=!0:X=!0),!Y&&!X||X&&0!==$)return B=!0,void(W=!0);W||s.removeClass("card-transitioning"),W=!0,((L=X?Math.max((y-N)/150,0):Math.max((P-q)/(u/2),0))>0&&X||Y)&&(X&&o.device.ios&&(g.css("-webkit-overflow-scrolling","auto"),g.scrollTop(0)),a.preventDefault()),L>1&&(L=Math.pow(L,.3)),L>(X?1.3:1.1)?(B=!1,W=!1,o.card.close(s)):s.transform("translate3d("+I+"px, "+j+"px, 0) scale("+T*(1-.2*L)+", "+E*(1-.2*L)+")")}}function Q(){B&&W&&(B=!1,W=!1,o.device.ios&&g.css("-webkit-overflow-scrolling",""),L>=.8?o.card.close(s):s.addClass("card-transitioning").transform("translate3d("+I+"px, "+j+"px, 0) scale("+T+", "+E+")"))}},close:function(a,e){void 0===a&&(a=".card-expandable.card-opened"),void 0===e&&(e=!0);var t=this,n=r(a).eq(0);if(n&&n.length&&n.hasClass("card-opened")&&!n.hasClass("card-opening")&&!n.hasClass("card-closing")){var o,s,d,c=n.children(".card-content"),i=n.parents(".page").eq(0);if(i.length)t.params.card.backrop&&(d=n.parents(".page-content").find(".card-backdrop")),t.params.card.hideNavbarOnOpen&&((o=i.children(".navbar")).length||i[0].f7Page&&(o=i[0].f7Page.$navbarEl),o&&o.length&&t.navbar.show(o,e)),t.params.card.hideToolbarOnOpen&&((s=i.children(".toolbar")).length||(s=i.parents(".view").children(".toolbar")),s.length||(s=i.parents(".views").children(".toolbar")),s&&s.length&&t.toolbar.show(s,e)),i.removeClass("page-with-card-opened"),d&&d.length&&d.removeClass("card-backdrop-in").addClass("card-backdrop-out"),n.removeClass("card-opened card-transitioning"),e?n.addClass("card-closing"):n.addClass("card-no-transition"),n.transform(""),n.trigger("card:close"),t.emit("cardClose",n[0]),c.css({width:"",height:""}).transform("").scrollTop(0,e?300:0),e?c.transitionEnd(function(){l()}):l(),n[0].detachEventHandlers&&(n[0].detachEventHandlers(),delete n[0].detachEventHandlers)}function l(){n.removeClass("card-closing card-no-transition"),n.trigger("card:closed"),n.find(".card-expandable-size").remove(),t.emit("cardClosed",n[0])}},toggle:function(a,e){void 0===a&&(a=".card-expandable");var t=r(a).eq(0);t.length&&(t.hasClass("card-opened")?this.card.close(t,e):this.card.open(t,e))}}),s={name:"card",params:{card:{hideNavbarOnOpen:!0,hideToolbarOnOpen:!0,swipeToClose:!0,closeByBackdropClick:!0,backrop:!0}},create:function(){t.extend(this,{card:{open:o.open.bind(this),close:o.close.bind(this),toggle:o.toggle.bind(this)}})},on:{pageBeforeIn:function(a){if(this.params.card.hideNavbarOnOpen&&a.navbarEl&&a.$el.find(".card-opened.card-expandable").length&&this.navbar.hide(a.navbarEl),this.params.card.hideToolbarOnOpen&&a.$el.find(".card-opened.card-expandable").length){var e=a.$el.children(".toolbar");e.length||(e=a.$el.parents(".view").children(".toolbar")),e.length||(e=a.$el.parents(".views").children(".toolbar")),e&&e.length&&this.toolbar.hide(e)}}},clicks:{".card-close":function(a,e){this.card.close(e.card)},".card-open":function(a,e){this.card.open(e.card)},".card-expandable":function(a,e,t){a.hasClass("card-opened")||a.hasClass("card-opening")||a.hasClass("card-closing")||r(t.target).closest(".card-prevent-open").length||this.card.open(a)},".card-backdrop-in":function(){var a=!1;this.params.card.closeByBackdropClick&&(a=!0);var e=r(".card-opened");e.length&&("true"===e.attr("data-close-on-backdrop-click")?a=!0:"false"===e.attr("data-close-on-backdrop-click")&&(a=!1),a&&this.card.close(e))}}};if(e){if(a.prototype.modules&&a.prototype.modules[s.name])return;a.use(s),a.instance&&(a.instance.useModuleParams(s,a.instance.params),a.instance.useModule(s))}return s}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
